"use strict";(self.webpackChunktp_clinica_online=self.webpackChunktp_clinica_online||[]).push([[811],{6811:(F,p,o)=>{o.r(p),o.d(p,{MisPacientesModule:()=>y});var r=o(6814),u=o(5920),t=o(4946),g=o(1487),m=o(9213),d=o(3530),h=o(420);function _(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.BQk()),2&i){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.dia+" "+n.horario," "),t.xp6(2),t.hij(" ",n.estado," ")}}function f(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,_,5,2,"ng-container",2),t.qZA()),2&i){const n=a.$implicit,e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.pacienteEmail===e.mail)}}function v(i,a){if(1&i){const n=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t._uU(2),t.qZA(),t.TgZ(3,"div",9),t._uU(4," Turnos Recientes "),t.qZA(),t.TgZ(5,"div",10),t.YNc(6,f,2,1,"div",11),t.TgZ(7,"button",12),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw(3);return t.KtG(l.seleccionarPaciente(s))}),t._uU(8,"Ver Historia Clinica"),t.qZA()()()}if(2&i){const n=a.$implicit,e=t.oxw(3);t.xp6(2),t.hij(" ",n.nombre+" "+n.apellido+" DNI: "+n.dni," "),t.xp6(4),t.Q6J("ngForOf",e.turnos)}}function x(i,a){if(1&i&&(t.TgZ(0,"div",6),t.YNc(1,v,9,2,"div",7),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.pacientes)}}function P(i,a){1&i&&(t.TgZ(0,"div",13),t._uU(1," Aun no atendio ningun paciente. "),t.qZA())}function T(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"h3",3),t._uU(2,"Seleccione el paciente a buscar historia medica"),t.qZA(),t.YNc(3,x,2,1,"div",4),t.YNc(4,P,2,0,"div",5),t.BQk()),2&i){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.pacientes.length>0),t.xp6(1),t.Q6J("ngIf",0===n.pacientes.length)}}function Z(i,a){if(1&i&&(t.ynx(0),t._UZ(1,"app-historia-clinica",14),t.BQk()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("paciente",n.pacienteSeleccionado)}}const C=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:(()=>{class i{constructor(n,e,c){this.usuarioService=n,this.userAuthService=e,this.turnosService=c,this.pacientes=[],this.pacientesSinDuplicados=[],this.mostrarHistoriaPaciente=!1,this.turnos=[]}ngOnInit(){this.obtenerPacientes()}obtenerPacientes(){this.userAuthService.estadoLogObservable().subscribe(n=>{n&&this.turnosService.traerPorEspecialista(n.email).subscribe(e=>{this.turnos=e,console.log(e);const c=e.map(s=>s.pacienteEmail);this.obtenerPacientesPorEmails(c)})})}obtenerPacientesPorEmails(n){const e=[];n.forEach(s=>{this.usuarioService.traerUno(s).subscribe(l=>{e.push(l[0]),e.length===n.length&&(console.log(e),this.pacientes=[...e],this.pacientes=this.pacientes.filter((S,I,J)=>J.findIndex(Q=>Q.mail===S.mail)===I))})})}seleccionarPaciente(n){this.pacienteSeleccionado=n,console.log(this.pacienteSeleccionado),this.mostrarHistoriaPaciente=!0}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(g.i),t.Y36(m.H),t.Y36(d.D))};static#i=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-page"]],decls:4,vars:2,consts:[[1,"row"],[1,"col-lg-6","mx-auto"],[4,"ngIf"],[1,"display-6"],["class","list-group list-group-flush ",4,"ngIf"],["class","alert alert-warning mt-3",4,"ngIf"],[1,"list-group","list-group-flush"],["class","card mt-4",4,"ngFor","ngForOf"],[1,"card","mt-4"],[1,"card-header"],[1,"card-body"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"alert","alert-warning","mt-3"],[3,"paciente"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,T,5,2,"ng-container",2),t.YNc(3,Z,2,1,"ng-container",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!c.mostrarHistoriaPaciente),t.xp6(1),t.Q6J("ngIf",c.mostrarHistoriaPaciente))},dependencies:[r.sg,r.O5,h.p],styles:["p[_ngcontent-%COMP%]{text-transform:capitalize}"]})}return i})()}];let b=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#i=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[[u.Bz.forChild(C)],r.ez,u.Bz]})}return i})();var A=o(8524);let y=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#i=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[r.ez,b,A.m]})}return i})()}}]);