"use strict";(self.webpackChunktp_clinica_online=self.webpackChunktp_clinica_online||[]).push([[182],{6182:(S,C,_)=>{_.r(C),_.d(C,{MisTurnosModule:()=>mn});var m=_(6814),i=_(5920),n=_(4946),h=_(9213),A=_(3530),c=_(1487),e=_(95),u=_(3519),d=_.n(u);function g(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Altura invalida. "),n.qZA(),n.BQk())}function f(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," La altura debe ser mayor o igual a 10 cm. "),n.qZA(),n.BQk())}function T(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Peso invalido. "),n.qZA(),n.BQk())}function Z(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," El peso debe ser mayor o igual a 1 kg. "),n.qZA(),n.BQk())}function b(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Temperatura invalida. "),n.qZA(),n.BQk())}function v(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," El temperatura debe ser mayor o igual a 30 grados. "),n.qZA(),n.BQk())}function I(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function Q(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function B(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function D(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function N(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Debe contener mas caracteres. "),n.qZA(),n.BQk())}function P(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Debe contener mas caracteres. "),n.qZA(),n.BQk())}function Y(o,s){if(1&o&&(n.TgZ(0,"div",24)(1,"div",6)(2,"div",7)(3,"label",25),n._uU(4,"Descripcion"),n.qZA(),n._UZ(5,"input",26),n.YNc(6,N,3,0,"ng-container",10),n.qZA(),n.TgZ(7,"div",7)(8,"label",27),n._uU(9,"Dato"),n.qZA(),n._UZ(10,"input",28),n.YNc(11,P,3,0,"ng-container",10),n.qZA()()()),2&o){const t=s.index,r=n.oxw(2);let a,l;n.Q6J("formGroupName",t),n.xp6(6),n.Q6J("ngIf",null==(a=r.historialForm.get("clave"))?null:a.hasError("minlength")),n.xp6(5),n.Q6J("ngIf",null==(l=r.historialForm.get("valor"))?null:l.hasError("minlength"))}}function O(o,s){if(1&o&&(n.ynx(0),n.TgZ(1,"div",22),n.YNc(2,Y,12,3,"div",23),n.qZA(),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngForOf",t.datosDinamicos.controls)}}function w(o,s){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Todos los campos son obligatorios y deben tener el formato correcto. "),n.qZA(),n._UZ(3,"br"),n.BQk())}function z(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",29),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.agregarDatoDinamico())}),n._uU(2,"Agregar Datos de Atencion"),n.qZA(),n.BQk()}}let x=(()=>{class o{constructor(t){this.fb=t,this.datosAgregados=0,this.volverMisTurnos=new n.vpe}ngOnInit(){console.log("inice"),this.historialForm=this.fb.group({altura:[10,[e.kI.required,e.kI.max(250),e.kI.min(10)]],peso:[1,[e.kI.required,e.kI.max(500),e.kI.min(1)]],temperatura:[30,[e.kI.required,e.kI.max(43),e.kI.min(30)]],presionSistole:[100,[e.kI.required,e.kI.max(250),e.kI.min(50)]],presionDiastole:[100,[e.kI.required,e.kI.max(250),e.kI.min(50)]],datosDinamicos:this.fb.array([])})}get datosDinamicos(){if(this.historialForm)return this.historialForm.get("datosDinamicos")}agregarDatoDinamico(){this.datosDinamicos&&(this.datosAgregados++,this.datosDinamicos.push(this.fb.group({clave:["",[e.kI.required,e.kI.minLength(4)]],valor:["",[e.kI.required,e.kI.minLength(1)]]})))}guardarHistorial(){this.historialForm&&this.historialForm.valid&&(this.atencion=this.historialForm.value,this.volverMisTurnos.emit(this.atencion))}static#n=this.\u0275fac=function(r){return new(r||o)(n.Y36(e.qu))};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-cargar-atencion"]],inputs:{idTurnoInput:"idTurnoInput"},outputs:{volverMisTurnos:"volverMisTurnos"},decls:46,vars:14,consts:[[1,"container"],[1,"card","p-4","mt-4","border","border-dark","border-5",2,"border-radius","1rem"],[1,"d-flex","align-items-center","text-center","mb-3","pb-1"],[1,"fas","fa-cubes","fa-2x","me-3",2,"color","#ff6219"],[1,"display-4","fw-bold","mb-0"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"form-control-group","col-5"],["for","altura",1,"form-label"],["type","number","id","altura","formControlName","altura",1,"form-control"],[4,"ngIf"],["for","peso",1,"form-label"],["type","number","id","peso","formControlName","peso",1,"form-control"],["for","temperatura",1,"form-label"],["type","number","id","temperatura","formControlName","temperatura",1,"form-control"],[1,"form-control-group","col-6"],["for","presionSistole",1,"form-label"],["type","number","id","presionSistole","formControlName","presionSistole",1,"form-control"],["for","presionDiastole",1,"form-label"],["type","number","id","presionDiastole","formControlName","presionDiastole",1,"form-control"],["type","submit",1,"btn","btn-success","mt-4"],[1,"text-danger"],["formArrayName","datosDinamicos"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["for","clave",1,"form-label"],["type","text","id","clave","formControlName","clave",1,"form-control"],["for","valor",1,"form-label"],["type","text","id","valor","formControlName","valor",1,"form-control"],["type","button",1,"btn","btn-primary","mt-4",3,"click"]],template:function(r,a){if(1&r&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"i",3),n.TgZ(4,"span",4),n._uU(5,"Cargar Datos de Atencion"),n.qZA()(),n.TgZ(6,"form",5),n.NdJ("ngSubmit",function(){return a.guardarHistorial()}),n.TgZ(7,"div",6)(8,"div",7)(9,"label",8),n._uU(10,"Altura (cm)"),n.qZA(),n._UZ(11,"input",9),n.YNc(12,g,3,0,"ng-container",10),n.YNc(13,f,3,0,"ng-container",10),n.qZA(),n.TgZ(14,"div",7)(15,"label",11),n._uU(16,"Peso (kg)"),n.qZA(),n._UZ(17,"input",12),n.YNc(18,T,3,0,"ng-container",10),n.YNc(19,Z,3,0,"ng-container",10),n.qZA()(),n.TgZ(20,"div",6)(21,"div",7)(22,"label",13),n._uU(23,"Temperatura (C\xb0)"),n.qZA(),n._UZ(24,"input",14),n.YNc(25,b,3,0,"ng-container",10),n.YNc(26,v,3,0,"ng-container",10),n.qZA(),n.TgZ(27,"div",7)(28,"div",6)(29,"div",15)(30,"label",16),n._uU(31,"Presi\xf3n Sistole (mmHg)"),n.qZA(),n._UZ(32,"input",17),n.YNc(33,I,3,0,"ng-container",10),n.YNc(34,Q,3,0,"ng-container",10),n.qZA(),n.TgZ(35,"div",15)(36,"label",18),n._uU(37,"Presi\xf3n Diastole (mmHg)"),n.qZA(),n._UZ(38,"input",19),n.YNc(39,B,3,0,"ng-container",10),n.YNc(40,D,3,0,"ng-container",10),n.qZA()()()(),n.YNc(41,O,3,1,"ng-container",10),n.YNc(42,w,4,0,"ng-container",10),n.YNc(43,z,3,0,"ng-container",10),n.TgZ(44,"button",20),n._uU(45,"Guardar Historial"),n.qZA()()()()),2&r){let l,p,U,q,y,M,E,k,F,J;n.xp6(6),n.Q6J("formGroup",a.historialForm),n.xp6(6),n.Q6J("ngIf",null==(l=a.historialForm.get("altura"))?null:l.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(p=a.historialForm.get("altura"))?null:p.hasError("min")),n.xp6(5),n.Q6J("ngIf",null==(U=a.historialForm.get("peso"))?null:U.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(q=a.historialForm.get("peso"))?null:q.hasError("min")),n.xp6(6),n.Q6J("ngIf",null==(y=a.historialForm.get("temperatura"))?null:y.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(M=a.historialForm.get("temperatura"))?null:M.hasError("min")),n.xp6(7),n.Q6J("ngIf",null==(E=a.historialForm.get("presionSistole"))?null:E.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(k=a.historialForm.get("presionSistole"))?null:k.hasError("min")),n.xp6(5),n.Q6J("ngIf",null==(F=a.historialForm.get("presionDiastole"))?null:F.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(J=a.historialForm.get("presionDiastole"))?null:J.hasError("min")),n.xp6(1),n.Q6J("ngIf",a.datosDinamicos),n.xp6(1),n.Q6J("ngIf",a.historialForm.invalid),n.xp6(1),n.Q6J("ngIf",a.datosAgregados<3)}},dependencies:[m.sg,m.O5,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.sg,e.u,e.x0,e.CE]})}return o})();function G(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"app-cargar-atencion",22),n.NdJ("volverMisTurnos",function(a){n.CHM(t);const l=n.oxw();return n.KtG(l.ocultarCargaAtencion(a))}),n.qZA(),n.BQk()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("idTurnoInput",null==t.turnoSeleccionado?null:t.turnoSeleccionado.idTurno)}}function j(o,s){if(1&o&&(n.TgZ(0,"li",34),n._uU(1),n.qZA()),2&o){const t=s.$implicit;n.xp6(1),n.AsE(" ",t.clave,": ",t.valor," ")}}function H(o,s){if(1&o&&(n.ynx(0),n.TgZ(1,"button",30),n._uU(2," Ver Datos Atencion "),n.qZA(),n.TgZ(3,"div",31)(4,"div",28)(5,"li",32)(6,"strong"),n._uU(7,"Datos de la consulta:"),n.qZA()(),n.TgZ(8,"li",29)(9,"strong"),n._uU(10,"Presi\xf3n sistole:"),n.qZA(),n._uU(11),n.qZA(),n.TgZ(12,"li",29)(13,"strong"),n._uU(14,"Presi\xf3n diastole:"),n.qZA(),n._uU(15),n.qZA(),n.TgZ(16,"li",29)(17,"strong"),n._uU(18,"Temperatura:"),n.qZA(),n._uU(19),n.qZA(),n.TgZ(20,"li",29)(21,"strong"),n._uU(22,"Peso:"),n.qZA(),n._uU(23),n.qZA(),n.TgZ(24,"li",29)(25,"strong"),n._uU(26,"Altura:"),n.qZA(),n._uU(27),n.qZA(),n.TgZ(28,"li",29)(29,"strong"),n._uU(30,"Datos din\xe1micos:"),n.qZA(),n.TgZ(31,"ul",28),n.YNc(32,j,2,2,"li",33),n.qZA()()()(),n.BQk()),2&o){const t=n.oxw().$implicit;n.xp6(11),n.hij(" ",t.atencion.presionSistole," "),n.xp6(4),n.hij(" ",t.atencion.presionDiastole," "),n.xp6(4),n.hij(" ",t.atencion.temperatura," "),n.xp6(4),n.hij(" ",t.atencion.peso," "),n.xp6(4),n.hij(" ",t.atencion.altura," "),n.xp6(5),n.Q6J("ngForOf",t.atencion.datosDinamicos)}}function V(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",35),n.NdJ("click",function(){n.CHM(t);const a=n.oxw().$implicit,l=n.oxw(2);return n.KtG(l.cancelarTurno(a))}),n._uU(2,"Cancelar"),n.qZA(),n.BQk()}}function R(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",36),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2).$implicit,l=n.oxw(2);return n.KtG(l.rechazarTurno(a))}),n._uU(2,"Rechazar"),n.qZA(),n.BQk()}}function K(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",37),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2).$implicit,l=n.oxw(2);return n.KtG(l.aceptarTurno(a))}),n._uU(2,"Aceptar"),n.qZA(),n.BQk()}}function $(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",38),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2).$implicit,l=n.oxw(2);return n.KtG(l.finalizarTurno(a))}),n._uU(2,"Finalizar y Cargar Historia"),n.qZA(),n.BQk()}}function L(o,s){if(1&o&&(n.ynx(0),n.YNc(1,R,3,0,"ng-container",21),n.YNc(2,K,3,0,"ng-container",21),n.YNc(3,$,3,0,"ng-container",21),n.BQk()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf","aceptado"!==t.estado&&"realizado"!==t.estado&&"cancelado"!==t.estado&&"rechazado"!==t.estado),n.xp6(1),n.Q6J("ngIf","realizado"!==t.estado&&"cancelado"!==t.estado&&"rechazado"!==t.estado&&"aceptado"!==t.estado),n.xp6(1),n.Q6J("ngIf","aceptado"===t.estado)}}function X(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",39),n.NdJ("click",function(){n.CHM(t);const a=n.oxw().$implicit,l=n.oxw(2);return n.KtG(l.verComentario(a))}),n._uU(2,"Ver Comentario (Cancelacion/Rechazo)"),n.qZA(),n.BQk()}}function W(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",40),n.NdJ("click",function(){n.CHM(t);const a=n.oxw().$implicit,l=n.oxw(2);return n.KtG(l.calificarAtencion(a))}),n._uU(2,"Ver Rese\xf1a Del Paciente"),n.qZA(),n.BQk()}}function nn(o,s){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",41),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2).$implicit,l=n.oxw(2);return n.KtG(l.calificarAtencion(a))}),n._uU(2,"Calificar Atencion"),n.qZA(),n.BQk()}}function tn(o,s){if(1&o&&(n.ynx(0),n.YNc(1,nn,3,0,"ng-container",21),n.BQk()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf","realizado"===t.estado&&0===t.encuesta.length)}}function on(o,s){if(1&o&&(n.TgZ(0,"div",25)(1,"div",26),n._uU(2),n.qZA(),n.TgZ(3,"div",27)(4,"div",28)(5,"li",29)(6,"strong"),n._uU(7,"Paciente:"),n.qZA(),n._uU(8),n.qZA(),n.TgZ(9,"li",29)(10,"strong"),n._uU(11,"Especialista:"),n.qZA(),n._uU(12),n.qZA(),n.TgZ(13,"li",29)(14,"strong"),n._uU(15,"Estado:"),n.qZA(),n._uU(16),n.qZA(),n.TgZ(17,"li",29)(18,"strong"),n._uU(19,"Especialidad:"),n.qZA(),n._uU(20),n.qZA(),n.TgZ(21,"li",29)(22,"strong"),n._uU(23,"Horario:"),n.qZA(),n._uU(24),n.qZA()(),n.YNc(25,H,33,6,"ng-container",21),n.YNc(26,V,3,0,"ng-container",21),n.YNc(27,L,4,3,"ng-container",21),n.YNc(28,X,3,0,"ng-container",21),n.YNc(29,W,3,0,"ng-container",21),n.YNc(30,tn,2,1,"ng-container",21),n.qZA()()),2&o){const t=s.$implicit,r=n.oxw(2);n.Q6J("ngClass",r.getEstadoClass(t.estado)),n.xp6(2),n.hij(" Turno del ",t.dia," "),n.xp6(6),n.hij(" ",t.nombrePaciente," "),n.xp6(4),n.hij(" ",t.nombreEspecialista," "),n.xp6(4),n.hij(" ",t.estado," "),n.xp6(4),n.hij(" ",t.especialidad," "),n.xp6(4),n.hij(" ",t.horario," "),n.xp6(1),n.Q6J("ngIf",t.atencion&&t.atencion.presionSistole),n.xp6(1),n.Q6J("ngIf","aceptado"!==t.estado&&"realizado"!==t.estado&&"rechazado"!==t.estado&&"cancelado"!==t.estado),n.xp6(1),n.Q6J("ngIf","especialista"===r.rolUsuario),n.xp6(1),n.Q6J("ngIf","rechazado"===t.estado||"cancelado"===t.estado),n.xp6(1),n.Q6J("ngIf","realizado"===t.estado&&t.encuesta.length>0),n.xp6(1),n.Q6J("ngIf","paciente"===r.rolUsuario)}}function en(o,s){if(1&o&&(n.ynx(0),n.TgZ(1,"div",23),n.YNc(2,on,31,13,"div",24),n.qZA(),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngForOf",t.turnosArray)}}let an=(()=>{class o{constructor(){this.TurnosService=(0,n.f3M)(A.D),this.UserAuthService=(0,n.f3M)(h.H),this.mostrarCargaAtencion=!1,this.usuarioEmail="",this.comentario="",this.encuesta="",this.nuevoEstado=""}ngOnInit(){this.UserAuthService.estadoLogObservable().subscribe(t=>{t&&(this.usuarioEmail=t.email)})}rechazarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="rechazado"}cancelarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="cancelado"}aceptarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="aceptado",this.guardarCambios()}finalizarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="realizado",this.mostrarCargaAtencion=!0}ocultarCargaAtencion(t){this.mostrarCargaAtencion=!1,this.atencion=t,console.log(this.atencion),this.guardarCambioAtencion()}verComentario(t){this.turnoSeleccionado=t}calificarAtencion(t){this.turnoSeleccionado=t}guardarCambios(){this.turnoSeleccionado&&this.TurnosService.modificarEstadoTurno(this.turnoSeleccionado?.idTurno,this.nuevoEstado,this.comentario).then(()=>{d().fire({icon:"success",text:`Turno ${this.nuevoEstado}`})}).catch(()=>{d().fire({icon:"error",title:"Error al modificar el turno"})})}guardarCambioAtencion(){this.turnoSeleccionado&&this.TurnosService.modificarCalificarAtencion(this.turnoSeleccionado?.idTurno,this.nuevoEstado,this.atencion).then(()=>{d().fire({icon:"success",text:"Datos de atencion guardados con exito"})}).catch(()=>{d().fire({icon:"error",title:"Error al modificar el turno"})})}guardarCambioEncuesta(){this.turnoSeleccionado&&this.TurnosService.modificarCalificarEncuesta(this.turnoSeleccionado?.idTurno,this.encuesta).then(()=>{d().fire({icon:"success",text:"Calificacion guardada con exito"})}).catch(()=>{d().fire({icon:"error",title:"Error al modificar el turno"})})}getEstadoClass(t){switch(t){case"aceptado":return"estado-aceptado";case"realizado":return"estado-realizado";case"rechazado":return"estado-rechazado";case"cancelado":return"estado-cancelado";default:return"estado-pendiente"}}ngOnDestroy(){this.observable&&this.observable.unsubscribe()}static#n=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-mis-turnos"]],inputs:{rolUsuario:"rolUsuario",turnosArray:"turnosArray"},decls:66,vars:6,consts:[["id","modalGuardarComentario","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalGuardarComentario","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalGuardarComentario",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-floating"],["placeholder","Escribe el comentario aqui","id","floatingTextarea",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingTextarea"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","modalVerComentario","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalVerComentario","aria-hidden","true",1,"modal","fade"],["id","modalVerComentario",1,"modal-title"],["readonly","","id","floatingTextarea",1,"form-control",3,"value"],["id","modalVerRese\xf1a","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalVerRese\xf1a","aria-hidden","true",1,"modal","fade"],["id","modalVerRese\xf1a",1,"modal-title"],["id","modalCalificarAtencion","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalCalificarAtencion","aria-hidden","true",1,"modal","fade"],["id","modalCalificarAtencion",1,"modal-title"],["id","floatingTextarea",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"idTurnoInput","volverMisTurnos"],[1,"container","d-flex","justify-content-between","align-items-center","justify-content-center","flex-wrap"],["class","card mt-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","mt-4",3,"ngClass"],[1,"card-header"],[1,"card-body"],[1,"list-group"],[1,"list-group-item","list-group-item-action"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn","btn-primary"],["id","collapseExample",1,"collapse"],[1,"list-group-item","list-group-item-action","active"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["type","button","data-bs-toggle","modal","data-bs-target","#modalGuardarComentario",1,"btn","btn-danger",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalGuardarComentario",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalVerComentario",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalVerRese\xf1a",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalCalificarAtencion",1,"btn","btn-primary",3,"click"]],template:function(r,a){1&r&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),n._uU(5,"Comentario del rechazo/cancelacion del Turno"),n.qZA(),n._UZ(6,"button",5),n.qZA(),n.TgZ(7,"div",6)(8,"div",7)(9,"textarea",8),n.NdJ("ngModelChange",function(p){return a.comentario=p}),n.qZA(),n.TgZ(10,"label",9),n._uU(11,"Comentario"),n.qZA()()(),n.TgZ(12,"div",10)(13,"button",11),n.NdJ("click",function(){return a.guardarCambios()}),n._uU(14,"Guardar"),n.qZA(),n.TgZ(15,"button",12),n._uU(16,"Cerrar"),n.qZA()()()()(),n.TgZ(17,"div",13)(18,"div",1)(19,"div",2)(20,"div",3)(21,"h5",14),n._uU(22,"Ver comentario"),n.qZA(),n._UZ(23,"button",5),n.qZA(),n.TgZ(24,"div",6)(25,"div",7),n._UZ(26,"textarea",15),n.TgZ(27,"label",9),n._uU(28,"Comentario"),n.qZA()()(),n.TgZ(29,"div",10)(30,"button",12),n._uU(31,"Cerrar"),n.qZA()()()()(),n.TgZ(32,"div",16)(33,"div",1)(34,"div",2)(35,"div",3)(36,"h5",17),n._uU(37,"Ver Rese\xf1a Del Paciente"),n.qZA(),n._UZ(38,"button",5),n.qZA(),n.TgZ(39,"div",6)(40,"div",7),n._UZ(41,"textarea",15),n.TgZ(42,"label",9),n._uU(43,"Rese\xf1a"),n.qZA()()(),n.TgZ(44,"div",10)(45,"button",12),n._uU(46,"Cerrar"),n.qZA()()()()(),n.TgZ(47,"div",18)(48,"div",1)(49,"div",2)(50,"div",3)(51,"h5",19),n._uU(52,"Calificar Atencion Brindada"),n.qZA(),n._UZ(53,"button",5),n.qZA(),n.TgZ(54,"div",6)(55,"div",7)(56,"textarea",20),n.NdJ("ngModelChange",function(p){return a.encuesta=p}),n.qZA(),n.TgZ(57,"label",9),n._uU(58,"Describa su atencion"),n.qZA()()(),n.TgZ(59,"div",10)(60,"button",11),n.NdJ("click",function(){return a.guardarCambioEncuesta()}),n._uU(61,"Guardar"),n.qZA(),n.TgZ(62,"button",12),n._uU(63,"Cerrar"),n.qZA()()()()(),n.YNc(64,G,2,1,"ng-container",21),n.YNc(65,en,3,1,"ng-container",21)),2&r&&(n.xp6(9),n.Q6J("ngModel",a.comentario),n.xp6(17),n.Q6J("value",null==a.turnoSeleccionado?null:a.turnoSeleccionado.comentario),n.xp6(15),n.Q6J("value",null==a.turnoSeleccionado?null:a.turnoSeleccionado.encuesta),n.xp6(15),n.Q6J("ngModel",a.encuesta),n.xp6(8),n.Q6J("ngIf",a.mostrarCargaAtencion),n.xp6(1),n.Q6J("ngIf",a.turnosArray))},dependencies:[m.mk,m.sg,m.O5,e.Fj,e.JJ,e.On,x],styles:[".estado-aceptado[_ngcontent-%COMP%]{background-color:#cbe2f7}.estado-realizado[_ngcontent-%COMP%]{background-color:#d8f0d8}.estado-rechazado[_ngcontent-%COMP%], .estado-cancelado[_ngcontent-%COMP%]{background-color:#f8d7da}.estado-pendiente[_ngcontent-%COMP%]{background-color:#e0e0e0}"]})}return o})();function rn(o,s){1&o&&(n.ynx(0),n.TgZ(1,"option",24),n._uU(2,"Email del Paciente"),n.qZA(),n.BQk())}function sn(o,s){1&o&&(n.ynx(0),n.TgZ(1,"option",25),n._uU(2,"Email del Especialista"),n.qZA(),n.BQk())}function cn(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div",6)(1,"label",26),n._uU(2,"Clave del Dato Din\xe1mico:"),n.qZA(),n.TgZ(3,"input",27),n.NdJ("ngModelChange",function(a){n.CHM(t);const l=n.oxw();return n.KtG(l.claveDatoDinamico=a)}),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(3),n.Q6J("ngModel",t.claveDatoDinamico)}}function ln(o,s){if(1&o&&(n.ynx(0),n._UZ(1,"app-mis-turnos",28),n.BQk()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("turnosArray",t.turnos)("rolUsuario",t.rolSesion)}}function un(o,s){1&o&&(n.TgZ(0,"div",29),n._uU(1," No se encontraron resultados. "),n.qZA())}const dn=[{path:"",redirectTo:"turnos",pathMatch:"full"},{path:"turnos",component:(()=>{class o{constructor(){this.UsuarioService=(0,n.f3M)(c.i),this.UserAuthService=(0,n.f3M)(h.H),this.TurnosService=(0,n.f3M)(A.D),this.userSubscription=null,this.campoBusqueda="dia",this.claveDatoDinamico="",this.valorBusqueda="",this.usuarioEmail="",this.campoEmail="",this.rolSesion="",this.turnos=[]}ngOnInit(){this.userSubscription=this.UserAuthService.estadoLogObservable().subscribe(t=>{t?this.UsuarioService.traerUno(t.email).subscribe(r=>{this.rolSesion=r[0].tipoUsuario,this.usuarioEmail=r[0].mail,this.campoEmail="paciente"===this.rolSesion?"pacienteEmail":"especialistaEmail"}):this.rolSesion=""})}seleccionarCampo(t){this.campoBusqueda=t.target.value}buscarTurnos(){console.log(this.campoBusqueda),console.log(this.valorBusqueda),console.log(this.claveDatoDinamico),this.turnos=[],"datosDinamicos"!=this.campoBusqueda?this.TurnosService.traerPorDosCampos(this.campoEmail,this.usuarioEmail,this.campoBusqueda,this.valorBusqueda).subscribe(t=>{console.log(t),this.turnos=t}):this.TurnosService.traerPorUnCampo(this.campoEmail,this.usuarioEmail).subscribe(t=>{t.forEach(a=>{a.atencion?.datosDinamicos.forEach(l=>{l.clave==this.claveDatoDinamico&&l.valor==this.valorBusqueda&&this.turnos.push(a)})}),console.log(this.turnos)})}static#n=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-mis-turnos-page"]],decls:41,vars:6,consts:[[1,"px-1","py-2","my-2","text-center"],[1,"display-1"],[1,"col-lg-8","mx-auto"],[1,"lead","mb-4"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],[3,"submit"],[1,"mb-3"],["for","campoBusqueda",1,"form-label"],["id","campoBusqueda","name","campoBusqueda",1,"form-select",3,"change"],["value","dia"],[4,"ngIf"],["value","especialidad"],["value","estado"],["value","atencion.altura"],["value","atencion.peso"],["value","atencion.temperatura"],["value","atencion.presionSistole"],["value","atencion.presionDiastole"],["value","datosDinamicos"],["class","mb-3",4,"ngIf"],["for","valorBusqueda",1,"form-label"],["type","text","id","valorBusqueda","name","valorBusqueda",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"],["class","alert alert-warning mt-3",4,"ngIf"],["value","pacienteEmail"],["value","especialistaEmail"],["for","claveDatoDinamico",1,"form-label"],["type","text","id","claveDatoDinamico","name","claveDatoDinamico",1,"form-control",3,"ngModel","ngModelChange"],[3,"turnosArray","rolUsuario"],[1,"alert","alert-warning","mt-3"]],template:function(r,a){1&r&&(n.TgZ(0,"div",0)(1,"h1",1),n._uU(2,"Mis Turnos"),n.qZA(),n.TgZ(3,"div",2)(4,"p",3),n._uU(5," Seleccione el parametro de busqueda del turno y el valor "),n.qZA(),n.TgZ(6,"div",4)(7,"form",5),n.NdJ("submit",function(){return a.buscarTurnos()}),n.TgZ(8,"div",6)(9,"label",7),n._uU(10,"Buscar por campo:"),n.qZA(),n.TgZ(11,"select",8),n.NdJ("change",function(p){return a.seleccionarCampo(p)}),n.TgZ(12,"option",9),n._uU(13,"D\xeda"),n.qZA(),n.YNc(14,rn,3,0,"ng-container",10),n.YNc(15,sn,3,0,"ng-container",10),n.TgZ(16,"option",11),n._uU(17,"Especialidad"),n.qZA(),n.TgZ(18,"option",12),n._uU(19,"Estado"),n.qZA(),n.TgZ(20,"option",13),n._uU(21,"Altura (Atenci\xf3n)"),n.qZA(),n.TgZ(22,"option",14),n._uU(23,"Peso (Atenci\xf3n)"),n.qZA(),n.TgZ(24,"option",15),n._uU(25,"Temperatura (Atenci\xf3n)"),n.qZA(),n.TgZ(26,"option",16),n._uU(27,"Presi\xf3n Sist\xf3lica (Atenci\xf3n)"),n.qZA(),n.TgZ(28,"option",17),n._uU(29,"Presi\xf3n Diast\xf3lica (Atenci\xf3n)"),n.qZA(),n.TgZ(30,"option",18),n._uU(31,"Datos Din\xe1micos (Atenci\xf3n)"),n.qZA()()(),n.TgZ(32,"div",6),n.YNc(33,cn,4,1,"div",19),n.TgZ(34,"label",20),n._uU(35,"Valor de B\xfasqueda:"),n.qZA(),n.TgZ(36,"input",21),n.NdJ("ngModelChange",function(p){return a.valorBusqueda=p}),n.qZA()(),n.TgZ(37,"button",22),n._uU(38,"Buscar"),n.qZA()()()(),n.YNc(39,ln,2,2,"ng-container",10),n.YNc(40,un,2,0,"div",23),n.qZA()),2&r&&(n.xp6(14),n.Q6J("ngIf","especialista"===a.rolSesion),n.xp6(1),n.Q6J("ngIf","paciente"===a.rolSesion),n.xp6(18),n.Q6J("ngIf","datosDinamicos"===a.campoBusqueda),n.xp6(3),n.Q6J("ngModel",a.valorBusqueda),n.xp6(3),n.Q6J("ngIf",a.turnos.length>0),n.xp6(1),n.Q6J("ngIf",0==a.turnos.length))},dependencies:[m.O5,e._Y,e.YN,e.Kr,e.Fj,e.JJ,e.JL,e.On,e.F,an],styles:[".botonimagen[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;height:350px;width:350px;background-position:center;transition:opacity .2s ease-in-out;font-weight:700;font-size:2rem}.imagenEspecialidad[_ngcontent-%COMP%]{background-image:url(especialidad.73b8973773c7c766.jpg)}.imagenProfesional[_ngcontent-%COMP%]{background-image:url(profesional.35465c3b3cb6e055.jpg)}.imagenPaciente[_ngcontent-%COMP%]{background-image:url(paciente.5c48cd21d6ffe785.jpg)}.botonimagen[_ngcontent-%COMP%]:hover{opacity:.7}"]})}return o})()},{path:"cargarAtencion",component:x}];let _n=(()=>{class o{static#n=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=n.oAB({type:o});static#o=this.\u0275inj=n.cJS({imports:[[i.Bz.forChild(dn)],m.ez,i.Bz]})}return o})(),mn=(()=>{class o{static#n=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=n.oAB({type:o});static#o=this.\u0275inj=n.cJS({imports:[m.ez,_n,e.u5,e.UX]})}return o})()},3530:(S,C,_)=>{_.d(C,{D:()=>n});var m=_(4946),i=_(5723);let n=(()=>{class h{constructor(){this.firestore=(0,m.f3M)(i.gg),this.instanciaFirestore=(0,i.hJ)(this.firestore,"turnos")}todos(){return(0,i.BS)(this.instanciaFirestore)}guardar(c){const u=(0,i.JU)(this.instanciaFirestore);return c.idTurno=u.id,(0,i.pl)(u,{...c})}traerUno(c){const e=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("idTurno","==",c));return(0,i.BS)(e)}traerPorFecha(c){const e=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("dia","==",c));return(0,i.BS)(e)}traerPorEspecialista(c){const e=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("especialistaEmail","==",c));return(0,i.BS)(e)}traerTurnosPorFechaRango(c,e,u){const d=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("dia",">=",e),(0,i.ar)("dia","<=",u),(0,i.ar)("especialistaEmail","==",c));return(0,i.BS)(d)}traerTurnosFinalizadosPorFechaRango(c,e,u){const d=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("dia",">=",e),(0,i.ar)("dia","<=",u),(0,i.ar)("estado","==","realizado"),(0,i.ar)("especialistaEmail","==",c));return(0,i.BS)(d)}traerPorPaciente(c){const e=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("pacienteEmail","==",c));return(0,i.BS)(e)}traerPorDosCampos(c,e,u,d){const g=(0,i.IO)(this.instanciaFirestore,(0,i.ar)(c,"==",e),(0,i.ar)(u,"==",d));return(0,i.BS)(g)}traerPorUnCampo(c,e){const u=(0,i.IO)(this.instanciaFirestore,(0,i.ar)(c,"==",e));return(0,i.BS)(u)}traerPorPacienteYEspecialidad(c,e){const u=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("pacienteEmail","==",c),(0,i.ar)("especialidad","==",e));return(0,i.BS)(u)}traerPorEspecialistaYEspecialidad(c,e){const u=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("especialistaEmail","==",c),(0,i.ar)("especialidad","==",e));return(0,i.BS)(u)}traerPorPacienteYProfesional(c,e){const u=(0,i.IO)(this.instanciaFirestore,(0,i.ar)("especialistaEmail","==",c),(0,i.ar)("pacienteEmail","==",e));return(0,i.BS)(u)}modificarEstadoTurno(c,e,u){return new Promise((d,g)=>{this.traerUnoSubscription=this.traerUno(c).subscribe(f=>{if(console.log(f[0]),f[0]){const T=c,Z=(0,i.hJ)(this.firestore,"turnos"),b=(0,i.JU)(Z,T);(0,i.r7)(b,{estado:e,comentario:u}).then(()=>{console.log("modificado"),d()}).catch(v=>{console.error("Error:",v),g(v)}).finally(()=>{this.traerUnoSubscription&&(this.traerUnoSubscription.unsubscribe(),this.traerUnoSubscription=void 0)})}})})}modificarCalificarAtencion(c,e,u){return new Promise((d,g)=>{this.traerUnoSubscription=this.traerUno(c).subscribe(f=>{if(console.log(f[0]),f[0]){const T=c,Z=(0,i.hJ)(this.firestore,"turnos"),b=(0,i.JU)(Z,T);(0,i.r7)(b,{estado:e,atencion:u}).then(()=>{console.log("modificado"),d()}).catch(v=>{console.error("Error:",v),g(v)}).finally(()=>{this.traerUnoSubscription&&(this.traerUnoSubscription.unsubscribe(),this.traerUnoSubscription=void 0)})}})})}modificarCalificarEncuesta(c,e){return new Promise((u,d)=>{this.traerUnoSubscription=this.traerUno(c).subscribe(g=>{if(console.log(g[0]),g[0]){const f=c,T=(0,i.hJ)(this.firestore,"turnos"),Z=(0,i.JU)(T,f);(0,i.r7)(Z,{encuesta:e}).then(()=>{console.log("modificado"),u()}).catch(b=>{console.error("Error:",b),d(b)}).finally(()=>{this.traerUnoSubscription&&(this.traerUnoSubscription.unsubscribe(),this.traerUnoSubscription=void 0)})}})})}static#n=this.\u0275fac=function(e){return new(e||h)};static#t=this.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);