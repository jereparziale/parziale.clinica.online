"use strict";(self.webpackChunktp_clinica_online=self.webpackChunktp_clinica_online||[]).push([[492],{5492:(S,v,u)=>{u.r(v),u.d(v,{MisTurnosModule:()=>Mn});var p=u(6814),s=u(5920),n=u(4946),g=u(9213),Z=u(1487),l=u(6656),a=u(95),_=u(3530),b=u(3519),m=u.n(b);function f(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Altura invalida. "),n.qZA(),n.BQk())}function x(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," La altura debe ser mayor o igual a 10 cm. "),n.qZA(),n.BQk())}function T(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Peso invalido. "),n.qZA(),n.BQk())}function h(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," El peso debe ser mayor o igual a 1 kg. "),n.qZA(),n.BQk())}function C(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Temperatura invalida. "),n.qZA(),n.BQk())}function q(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," El temperatura debe ser mayor o igual a 30 grados. "),n.qZA(),n.BQk())}function E(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function I(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function N(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function w(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Presion invalida. "),n.qZA(),n.BQk())}function B(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Debe contener mas caracteres. "),n.qZA(),n.BQk())}function Y(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Debe contener mas caracteres. "),n.qZA(),n.BQk())}function O(o,r){if(1&o&&(n.TgZ(0,"div",24)(1,"div",6)(2,"div",7)(3,"label",25),n._uU(4,"Descripcion"),n.qZA(),n._UZ(5,"input",26),n.YNc(6,B,3,0,"ng-container",10),n.qZA(),n.TgZ(7,"div",7)(8,"label",27),n._uU(9,"Dato"),n.qZA(),n._UZ(10,"input",28),n.YNc(11,Y,3,0,"ng-container",10),n.qZA()()()),2&o){const t=r.index,i=n.oxw(2);let e,c;n.Q6J("formGroupName",t),n.xp6(6),n.Q6J("ngIf",null==(e=i.historialForm.get("clave"))?null:e.hasError("minlength")),n.xp6(5),n.Q6J("ngIf",null==(c=i.historialForm.get("valor"))?null:c.hasError("minlength"))}}function D(o,r){if(1&o&&(n.ynx(0),n.TgZ(1,"div",22),n.YNc(2,O,12,3,"div",23),n.qZA(),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngForOf",t.datosDinamicos.controls)}}function j(o,r){1&o&&(n.ynx(0),n.TgZ(1,"small",21),n._uU(2," Todos los campos son obligatorios y deben tener el formato correcto. "),n.qZA(),n._UZ(3,"br"),n.BQk())}function H(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",29),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.agregarDatoDinamico())}),n._uU(2,"Agregar Datos de Atencion"),n.qZA(),n.BQk()}}let A=(()=>{class o{constructor(t){this.fb=t,this.datosAgregados=0,this.volverMisTurnos=new n.vpe}ngOnInit(){this.historialForm=this.fb.group({altura:[10,[a.kI.required,a.kI.max(250),a.kI.min(10)]],peso:[1,[a.kI.required,a.kI.max(500),a.kI.min(1)]],temperatura:[30,[a.kI.required,a.kI.max(43),a.kI.min(30)]],presionSistole:[100,[a.kI.required,a.kI.max(250),a.kI.min(50)]],presionDiastole:[100,[a.kI.required,a.kI.max(250),a.kI.min(50)]],datosDinamicos:this.fb.array([])})}get datosDinamicos(){if(this.historialForm)return this.historialForm.get("datosDinamicos")}agregarDatoDinamico(){this.datosDinamicos&&(this.datosAgregados++,this.datosDinamicos.push(this.fb.group({clave:["",[a.kI.required,a.kI.minLength(4)]],valor:["",[a.kI.required,a.kI.minLength(1)]]})))}guardarHistorial(){this.historialForm&&this.historialForm.valid&&(this.atencion=this.historialForm.value,this.volverMisTurnos.emit(this.atencion))}static#n=this.\u0275fac=function(i){return new(i||o)(n.Y36(a.qu))};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-cargar-atencion"]],inputs:{idTurnoInput:"idTurnoInput"},outputs:{volverMisTurnos:"volverMisTurnos"},decls:46,vars:14,consts:[[1,"container"],[1,"card","p-4","mt-4","border","border-dark","border-5",2,"border-radius","1rem"],[1,"d-flex","align-items-center","text-center","mb-3","pb-1"],[1,"fas","fa-cubes","fa-2x","me-3",2,"color","#ff6219"],[1,"display-4","fw-bold","mb-0"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"form-control-group","col-5"],["for","altura",1,"form-label"],["type","number","id","altura","formControlName","altura",1,"form-control"],[4,"ngIf"],["for","peso",1,"form-label"],["type","number","id","peso","formControlName","peso",1,"form-control"],["for","temperatura",1,"form-label"],["type","number","id","temperatura","formControlName","temperatura",1,"form-control"],[1,"form-control-group","col-6"],["for","presionSistole",1,"form-label"],["type","number","id","presionSistole","formControlName","presionSistole",1,"form-control"],["for","presionDiastole",1,"form-label"],["type","number","id","presionDiastole","formControlName","presionDiastole",1,"form-control"],["type","submit",1,"btn","btn-success","mt-4"],[1,"text-danger"],["formArrayName","datosDinamicos"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["for","clave",1,"form-label"],["type","text","id","clave","formControlName","clave",1,"form-control"],["for","valor",1,"form-label"],["type","text","id","valor","formControlName","valor",1,"form-control"],["type","button",1,"btn","btn-primary","mt-4",3,"click"]],template:function(i,e){if(1&i&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"i",3),n.TgZ(4,"span",4),n._uU(5,"Cargar Datos de Atencion"),n.qZA()(),n.TgZ(6,"form",5),n.NdJ("ngSubmit",function(){return e.guardarHistorial()}),n.TgZ(7,"div",6)(8,"div",7)(9,"label",8),n._uU(10,"Altura (cm)"),n.qZA(),n._UZ(11,"input",9),n.YNc(12,f,3,0,"ng-container",10),n.YNc(13,x,3,0,"ng-container",10),n.qZA(),n.TgZ(14,"div",7)(15,"label",11),n._uU(16,"Peso (kg)"),n.qZA(),n._UZ(17,"input",12),n.YNc(18,T,3,0,"ng-container",10),n.YNc(19,h,3,0,"ng-container",10),n.qZA()(),n.TgZ(20,"div",6)(21,"div",7)(22,"label",13),n._uU(23,"Temperatura (C\xb0)"),n.qZA(),n._UZ(24,"input",14),n.YNc(25,C,3,0,"ng-container",10),n.YNc(26,q,3,0,"ng-container",10),n.qZA(),n.TgZ(27,"div",7)(28,"div",6)(29,"div",15)(30,"label",16),n._uU(31,"Presi\xf3n Sistole (mmHg)"),n.qZA(),n._UZ(32,"input",17),n.YNc(33,E,3,0,"ng-container",10),n.YNc(34,I,3,0,"ng-container",10),n.qZA(),n.TgZ(35,"div",15)(36,"label",18),n._uU(37,"Presi\xf3n Diastole (mmHg)"),n.qZA(),n._UZ(38,"input",19),n.YNc(39,N,3,0,"ng-container",10),n.YNc(40,w,3,0,"ng-container",10),n.qZA()()()(),n.YNc(41,D,3,1,"ng-container",10),n.YNc(42,j,4,0,"ng-container",10),n.YNc(43,H,3,0,"ng-container",10),n.TgZ(44,"button",20),n._uU(45,"Guardar Historial"),n.qZA()()()()),2&i){let c,d,k,U,y,M,F,P,J,Q;n.xp6(6),n.Q6J("formGroup",e.historialForm),n.xp6(6),n.Q6J("ngIf",null==(c=e.historialForm.get("altura"))?null:c.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(d=e.historialForm.get("altura"))?null:d.hasError("min")),n.xp6(5),n.Q6J("ngIf",null==(k=e.historialForm.get("peso"))?null:k.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(U=e.historialForm.get("peso"))?null:U.hasError("min")),n.xp6(6),n.Q6J("ngIf",null==(y=e.historialForm.get("temperatura"))?null:y.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(M=e.historialForm.get("temperatura"))?null:M.hasError("min")),n.xp6(7),n.Q6J("ngIf",null==(F=e.historialForm.get("presionSistole"))?null:F.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(P=e.historialForm.get("presionSistole"))?null:P.hasError("min")),n.xp6(5),n.Q6J("ngIf",null==(J=e.historialForm.get("presionDiastole"))?null:J.hasError("max")),n.xp6(1),n.Q6J("ngIf",null==(Q=e.historialForm.get("presionDiastole"))?null:Q.hasError("min")),n.xp6(1),n.Q6J("ngIf",e.datosDinamicos),n.xp6(1),n.Q6J("ngIf",e.historialForm.invalid),n.xp6(1),n.Q6J("ngIf",e.datosAgregados<3)}},dependencies:[p.sg,p.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE]})}return o})();function z(o,r){1&o&&(n.TgZ(0,"div",23),n._uU(1," No posee turnos asignados para la opcion seleccionada. "),n.qZA())}function G(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",29),n.NdJ("click",function(){n.CHM(t);const e=n.oxw().$implicit,c=n.oxw(2);return n.KtG(c.cancelarTurno(e))}),n._uU(2,"Cancelar"),n.qZA(),n.BQk()}}function $(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",30),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2).$implicit,c=n.oxw(2);return n.KtG(c.rechazarTurno(e))}),n._uU(2,"Rechazar"),n.qZA(),n.BQk()}}function K(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",31),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2).$implicit,c=n.oxw(2);return n.KtG(c.aceptarTurno(e))}),n._uU(2,"Aceptar"),n.qZA(),n.BQk()}}function L(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",32),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2).$implicit,c=n.oxw(2);return n.KtG(c.finalizarTurno(e))}),n._uU(2,"Finalizar"),n.qZA(),n.BQk()}}function R(o,r){if(1&o&&(n.ynx(0),n.YNc(1,$,3,0,"ng-container",19),n.YNc(2,K,3,0,"ng-container",19),n.YNc(3,L,3,0,"ng-container",19),n.BQk()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf","aceptado"!==t.estado&&"realizado"!==t.estado&&"cancelado"!==t.estado),n.xp6(1),n.Q6J("ngIf","realizado"!==t.estado&&"cancelado"!==t.estado&&"rechazado"!==t.estado&&"aceptado"!==t.estado),n.xp6(1),n.Q6J("ngIf","aceptado"===t.estado)}}function V(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",33),n.NdJ("click",function(){n.CHM(t);const e=n.oxw().$implicit,c=n.oxw(2);return n.KtG(c.verComentario(e))}),n._uU(2,"Ver Comentario/Rese\xf1a"),n.qZA(),n.BQk()}}function X(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",34),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2).$implicit,c=n.oxw(2);return n.KtG(c.calificarAtencion(e))}),n._uU(2,"Calificar Atencion"),n.qZA(),n.BQk()}}function W(o,r){if(1&o&&(n.ynx(0),n.YNc(1,X,3,0,"ng-container",19),n.BQk()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf","realizado"===t.estado&&0===t.encuesta.length)}}function nn(o,r){if(1&o&&(n.TgZ(0,"div",24)(1,"div",25)(2,"h5",26),n._uU(3),n.qZA(),n.TgZ(4,"h6",27),n._uU(5),n.qZA(),n.TgZ(6,"p",28),n._uU(7),n.qZA(),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.TgZ(10,"p"),n._uU(11),n.qZA(),n.YNc(12,G,3,0,"ng-container",19),n.YNc(13,R,4,3,"ng-container",19),n.YNc(14,V,3,0,"ng-container",19),n.YNc(15,W,2,1,"ng-container",19),n.qZA()()),2&o){const t=r.$implicit,i=n.oxw(2);n.Q6J("ngClass",i.getEstadoClass(t.estado)),n.xp6(3),n.hij("D\xeda: ",t.dia,""),n.xp6(2),n.hij("Horario: ",t.horario,""),n.xp6(2),n.hij("Estado: ",t.estado,""),n.xp6(2),n.hij("Especialidad ",t.especialidad,""),n.xp6(2),n.hij("Paciente: ",t.pacienteEmail,""),n.xp6(1),n.Q6J("ngIf","aceptado"!==t.estado&&"realizado"!==t.estado&&"rechazado"!==t.estado&&"cancelado"!==t.estado),n.xp6(1),n.Q6J("ngIf","especialista"===i.rolUsuario),n.xp6(1),n.Q6J("ngIf","realizado"===t.estado||"rechazado"===t.estado||"cancelado"===t.estado),n.xp6(1),n.Q6J("ngIf","paciente"===i.rolUsuario)}}function tn(o,r){if(1&o&&(n.ynx(0),n.TgZ(1,"div",20),n.YNc(2,z,2,0,"div",21),n.YNc(3,nn,16,10,"div",22),n.qZA(),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",0===t.turnosArray.length),n.xp6(1),n.Q6J("ngForOf",t.turnosArray)}}function on(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"app-cargar-atencion",35),n.NdJ("volverMisTurnos",function(e){n.CHM(t);const c=n.oxw();return n.KtG(c.ocultarCargaAtencion(e))}),n.qZA(),n.BQk()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("idTurnoInput",null==t.turnoSeleccionado?null:t.turnoSeleccionado.idTurno)}}let en=(()=>{class o{constructor(){this.TurnosService=(0,n.f3M)(_.D),this.UserAuthService=(0,n.f3M)(g.H),this.mostrarCargaAtencion=!1,this.turnosArray=[],this.usuarioEmail="",this.comentario="",this.encuesta="",this.nuevoEstado=""}ngOnInit(){this.UserAuthService.estadoLogObservable().subscribe(t=>{if(t)switch(this.usuarioEmail=t.email,this.rolUsuario){case"paciente":switch(this.tipoFiltrado){case"especialidad":this.especialidadSeleccionada&&(this.observable=this.TurnosService.traerPorPacienteYEspecialidad(t.email,this.especialidadSeleccionada).subscribe(i=>{i&&(this.turnosArray=i)}));break;case"profesional":this.objetoBuscado&&(this.observable=this.TurnosService.traerPorPacienteYProfesional(this.objetoBuscado.mail,t.email).subscribe(i=>{i&&(this.turnosArray=i)})),console.log(t.email),console.log(this.objetoBuscado)}break;case"especialista":switch(this.tipoFiltrado){case"especialidad":this.especialidadSeleccionada&&(this.observable=this.TurnosService.traerPorEspecialistaYEspecialidad(t.email,this.especialidadSeleccionada).subscribe(i=>{i&&(this.turnosArray=i)}));break;case"paciente":this.objetoBuscado&&(this.observable=this.TurnosService.traerPorPacienteYProfesional(t.email,this.objetoBuscado.mail).subscribe(i=>{i&&(this.turnosArray=i)}))}}})}rechazarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="rechazado"}cancelarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="cancelado"}aceptarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="aceptado",this.guardarCambios()}finalizarTurno(t){this.turnoSeleccionado=t,this.nuevoEstado="realizado",this.mostrarCargaAtencion=!0}ocultarCargaAtencion(t){this.mostrarCargaAtencion=!1,this.atencion=t,console.log(this.atencion),this.guardarCambioAtencion()}verComentario(t){this.turnoSeleccionado=t}calificarAtencion(t){this.turnoSeleccionado=t}guardarCambios(){this.turnoSeleccionado&&this.TurnosService.modificarEstadoTurno(this.turnoSeleccionado?.idTurno,this.nuevoEstado,this.comentario).then(()=>{m().fire({icon:"success",text:`Turno ${this.nuevoEstado}`})}).catch(()=>{m().fire({icon:"error",title:"Error al modificar el turno"})})}guardarCambioAtencion(){this.turnoSeleccionado&&this.TurnosService.modificarCalificarAtencion(this.turnoSeleccionado?.idTurno,this.nuevoEstado,this.atencion).then(()=>{m().fire({icon:"success",text:"Datos de atencion guardados con exito"})}).catch(()=>{m().fire({icon:"error",title:"Error al modificar el turno"})})}guardarCambioEncuesta(){this.turnoSeleccionado&&this.TurnosService.modificarCalificarEncuesta(this.turnoSeleccionado?.idTurno,this.encuesta).then(()=>{m().fire({icon:"success",text:"Calificacion guardada con exito"})}).catch(()=>{m().fire({icon:"error",title:"Error al modificar el turno"})})}getEstadoClass(t){switch(t){case"aceptado":return"estado-aceptado";case"realizado":return"estado-realizado";case"rechazado":return"estado-rechazado";case"cancelado":return"estado-cancelado";default:return"estado-pendiente"}}ngOnDestroy(){this.observable&&this.observable.unsubscribe()}static#n=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-mis-turnos"]],inputs:{tipoFiltrado:"tipoFiltrado",rolUsuario:"rolUsuario",objetoBuscado:"objetoBuscado",especialidadSeleccionada:"especialidadSeleccionada"},decls:51,vars:5,consts:[["id","modalConfirmarTurno","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalConfirmarTurnoLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalConfirmarTurnoLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-floating"],["placeholder","Escribe el comentario aqui","id","floatingTextarea",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingTextarea"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","modalVerComentario","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalVerComentario","aria-hidden","true",1,"modal","fade"],["id","modalVerComentario",1,"modal-title"],["readonly","","id","floatingTextarea",1,"form-control",3,"value"],["id","modalCalificarAtencion","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","modalCalificarAtencion","aria-hidden","true",1,"modal","fade"],["id","modalCalificarAtencion",1,"modal-title"],["id","floatingTextarea",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"container","d-flex","justify-content-between","align-items-center","justify-content-center","flex-wrap"],["class","alert alert-warning mt-3",4,"ngIf"],["class","card","style","width: 20rem;",3,"ngClass",4,"ngFor","ngForOf"],[1,"alert","alert-warning","mt-3"],[1,"card",2,"width","20rem",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"bold","mb-2"],["type","button","data-bs-toggle","modal","data-bs-target","#modalConfirmarTurno",1,"btn","btn-danger",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalConfirmarTurno",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalVerComentario",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#modalCalificarAtencion",1,"btn","btn-primary",3,"click"],[3,"idTurnoInput","volverMisTurnos"]],template:function(i,e){1&i&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),n._uU(5,"Modificar Turno"),n.qZA(),n._UZ(6,"button",5),n.qZA(),n.TgZ(7,"div",6)(8,"div",7)(9,"textarea",8),n.NdJ("ngModelChange",function(d){return e.comentario=d}),n.qZA(),n.TgZ(10,"label",9),n._uU(11,"Comentario"),n.qZA()()(),n.TgZ(12,"div",10)(13,"button",11),n.NdJ("click",function(){return e.guardarCambios()}),n._uU(14,"Guardar"),n.qZA(),n.TgZ(15,"button",12),n._uU(16,"Cerrar"),n.qZA()()()()(),n.TgZ(17,"div",13)(18,"div",1)(19,"div",2)(20,"div",3)(21,"h5",14),n._uU(22,"Ver comentario"),n.qZA(),n._UZ(23,"button",5),n.qZA(),n.TgZ(24,"div",6)(25,"div",7),n._UZ(26,"textarea",15),n.TgZ(27,"label",9),n._uU(28,"Comentario"),n.qZA()()(),n.TgZ(29,"div",10)(30,"button",12),n._uU(31,"Cerrar"),n.qZA()()()()(),n.TgZ(32,"div",16)(33,"div",1)(34,"div",2)(35,"div",3)(36,"h5",17),n._uU(37,"Calificar Atencion Brindada"),n.qZA(),n._UZ(38,"button",5),n.qZA(),n.TgZ(39,"div",6)(40,"div",7)(41,"textarea",18),n.NdJ("ngModelChange",function(d){return e.encuesta=d}),n.qZA(),n.TgZ(42,"label",9),n._uU(43,"Describa su atencion"),n.qZA()()(),n.TgZ(44,"div",10)(45,"button",11),n.NdJ("click",function(){return e.guardarCambioEncuesta()}),n._uU(46,"Guardar"),n.qZA(),n.TgZ(47,"button",12),n._uU(48,"Cerrar"),n.qZA()()()()(),n.YNc(49,tn,4,2,"ng-container",19),n.YNc(50,on,2,1,"ng-container",19)),2&i&&(n.xp6(9),n.Q6J("ngModel",e.comentario),n.xp6(17),n.Q6J("value",null==e.turnoSeleccionado?null:e.turnoSeleccionado.comentario),n.xp6(15),n.Q6J("ngModel",e.encuesta),n.xp6(8),n.Q6J("ngIf",!e.mostrarCargaAtencion),n.xp6(1),n.Q6J("ngIf",e.mostrarCargaAtencion))},dependencies:[p.mk,p.sg,p.O5,a.Fj,a.JJ,a.On,A],styles:[".estado-aceptado[_ngcontent-%COMP%]{background-color:#cbe2f7}.estado-realizado[_ngcontent-%COMP%]{background-color:#d8f0d8}.estado-rechazado[_ngcontent-%COMP%], .estado-cancelado[_ngcontent-%COMP%]{background-color:#f8d7da}.estado-pendiente[_ngcontent-%COMP%]{background-color:#e0e0e0}"]})}return o})();function an(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"input",5),n.NdJ("ngModelChange",function(e){n.CHM(t);const c=n.oxw(2);return n.KtG(c.busqueda=e)}),n.qZA(),n.TgZ(2,"button",6),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2);return n.KtG(e.buscar())}),n._uU(3,"Buscar"),n.qZA(),n.BQk()}if(2&o){const t=n.oxw(2);n.xp6(1),n.Q6J("ngModel",t.busqueda)}}function rn(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"div",9),n.NdJ("click",function(){const c=n.CHM(t).$implicit,d=n.oxw(3);return n.KtG(d.selecionarEspecialidad(c))}),n._uU(1),n.qZA()}if(2&o){const t=r.$implicit;n.xp6(1),n.hij(" ",t," ")}}function sn(o,r){if(1&o&&(n.ynx(0),n.TgZ(1,"div",7),n.YNc(2,rn,2,1,"div",8),n.qZA(),n.BQk()),2&o){const t=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",t.especialidadesDelProfesional)}}function cn(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"div",9),n.NdJ("click",function(){const c=n.CHM(t).$implicit,d=n.oxw(3);return n.KtG(d.selecionarEspecialidad(c.especialidad))}),n._uU(1),n.qZA()}if(2&o){const t=r.$implicit;n.xp6(1),n.hij(" ",t.especialidad," ")}}function ln(o,r){if(1&o&&(n.ynx(0),n.TgZ(1,"div",7),n.YNc(2,cn,2,1,"div",8),n.qZA(),n.BQk()),2&o){const t=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",t.especialidades)}}function un(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"div",9),n.NdJ("click",function(){const c=n.CHM(t).$implicit,d=n.oxw(4);return n.KtG(d.seleccionarProfesional(c))}),n._uU(1),n.qZA()}if(2&o){const t=r.$implicit;n.xp6(1),n.hij(" ",t.nombre+""+t.apellido," ")}}function _n(o,r){if(1&o&&(n.TgZ(0,"div",7),n.YNc(1,un,2,1,"div",8),n.qZA()),2&o){const t=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",t.resultadosBusqueda)}}function dn(o,r){if(1&o&&(n.ynx(0),n.YNc(1,_n,2,1,"div",10),n.BQk()),2&o){const t=n.oxw(2);n.xp6(1),n.Q6J("ngIf",t.resultadosBusqueda.length>0)}}function pn(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"div",9),n.NdJ("click",function(){const c=n.CHM(t).$implicit,d=n.oxw(4);return n.KtG(d.seleccionarPaciente(c))}),n._uU(1),n.qZA()}if(2&o){const t=r.$implicit;n.xp6(1),n.hij(" ",t.nombre+""+t.apellido," ")}}function mn(o,r){if(1&o&&(n.TgZ(0,"div",7),n.YNc(1,pn,2,1,"div",8),n.qZA()),2&o){const t=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",t.resultadosBusqueda)}}function gn(o,r){if(1&o&&(n.ynx(0),n.YNc(1,mn,2,1,"div",10),n.BQk()),2&o){const t=n.oxw(2);n.xp6(1),n.Q6J("ngIf",t.resultadosBusqueda.length>0)}}function fn(o,r){1&o&&(n.TgZ(0,"div",11),n._uU(1," No se encontraron resultados. "),n.qZA())}function hn(o,r){if(1&o&&(n.ynx(0),n.TgZ(1,"h3"),n._uU(2),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.TgZ(5,"div",3),n.YNc(6,an,4,1,"ng-container",2),n.qZA(),n.YNc(7,sn,3,1,"ng-container",2),n.YNc(8,ln,3,1,"ng-container",2),n.YNc(9,dn,2,1,"ng-container",2),n.YNc(10,gn,2,1,"ng-container",2),n.YNc(11,fn,2,0,"div",4),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.hij("Filtrar por ",t.filtrarPor,""),n.xp6(2),n.hij("Ingrese el nombre ",t.titulo,""),n.xp6(2),n.Q6J("ngIf","profesional"===t.filtrarPor||"paciente"===t.filtrarPor),n.xp6(1),n.Q6J("ngIf","especialidad"===t.filtrarPor&&"especialista"===t.rolUsuario),n.xp6(1),n.Q6J("ngIf","especialidad"===t.filtrarPor&&"paciente"===t.rolUsuario),n.xp6(1),n.Q6J("ngIf","profesional"===t.filtrarPor),n.xp6(1),n.Q6J("ngIf","paciente"===t.filtrarPor),n.xp6(1),n.Q6J("ngIf",t.noHayResultados)}}function bn(o,r){if(1&o&&(n.ynx(0),n._UZ(1,"app-mis-turnos",12),n.BQk()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("tipoFiltrado",t.tipoFiltrado)("rolUsuario",t.rolUsuario)("objetoBuscado",t.objetoSeleccionado)("especialidadSeleccionada",t.especialidadSeleccionada)}}let xn=(()=>{class o{constructor(){this.filtrarPor="",this.titulo="",this.UsuarioService=(0,n.f3M)(Z.i),this.especialidadService=(0,n.f3M)(l.T),this.UserAuthService=(0,n.f3M)(g.H),this.usuarios=[],this.especialidades=[],this.especialidadesDelProfesional=[],this.busqueda="",this.resultadosBusqueda=[],this.noHayResultados=!1,this.especialidadSeleccionada=" ",this.mostrarMisTurnos=!1}ngOnInit(){switch(this.rolUsuario){case"paciente":switch(this.tipoFiltrado){case"especialidad":this.filtrarPor="especialidad",this.titulo="de la especialidad",this.especialidadService.todos().subscribe(t=>{this.especialidades=t});break;case"profesional":this.filtrarPor="profesional",this.titulo="del profesional",this.UsuarioService.todos("especialista").subscribe(t=>{this.usuarios=t})}break;case"especialista":switch(this.tipoFiltrado){case"especialidad":this.filtrarPor="especialidad",this.titulo="de la especialidad",this.UserAuthService.estadoLogObservable().subscribe(t=>{t?(console.log(t),this.UsuarioService.traerUno(t.email).subscribe(i=>{this.especialidadesDelProfesional=i[0].especialidades,console.log(this.especialidadesDelProfesional)})):this.especialidadesDelProfesional=[]});break;case"paciente":this.filtrarPor="paciente",this.titulo="del paciente",this.UsuarioService.todos("paciente").subscribe(t=>{this.usuarios=t})}}}filtrarPorTermino(t){return this.resultadosBusqueda=this.usuarios.filter(i=>`${i.apellido} ${i.nombre}`.toLowerCase().includes(t.toLowerCase())),[]}buscar(){this.filtrarPorTermino(this.busqueda),this.noHayResultados=!(this.resultadosBusqueda.length>0)}seleccionarProfesional(t){this.objetoSeleccionado=t,this.especialidadesDelProfesional=this.objetoSeleccionado.especialidades,this.mostrarMisTurnos=!0}selecionarEspecialidad(t){this.especialidadSeleccionada=t,this.mostrarMisTurnos=!0}seleccionarPaciente(t){this.objetoSeleccionado=t,this.mostrarMisTurnos=!0}static#n=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-filtrar"]],inputs:{tipoFiltrado:"tipoFiltrado",rolUsuario:"rolUsuario"},decls:4,vars:2,consts:[[1,"row"],[1,"col-lg-6","mx-auto"],[4,"ngIf"],[1,"input-group"],["class","alert alert-warning mt-3",4,"ngIf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item list-group-item-action list-group-item-light",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-light",3,"click"],["class","list-group list-group-flush ",4,"ngIf"],[1,"alert","alert-warning","mt-3"],[3,"tipoFiltrado","rolUsuario","objetoBuscado","especialidadSeleccionada"]],template:function(i,e){1&i&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,hn,12,8,"ng-container",2),n.qZA(),n.YNc(3,bn,2,4,"ng-container",2),n.qZA()),2&i&&(n.xp6(2),n.Q6J("ngIf",!e.mostrarMisTurnos),n.xp6(1),n.Q6J("ngIf",e.mostrarMisTurnos))},dependencies:[p.sg,p.O5,a.Fj,a.JJ,a.On,en]})}return o})();function Tn(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",7),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2);return n.KtG(e.irProfesional())}),n._uU(2,"Turnos Por Profesional"),n.qZA(),n.BQk()}}function Cn(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",8),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2);return n.KtG(e.irPaciente())}),n._uU(2,"Turnos Por Paciente"),n.qZA(),n.BQk()}}function vn(o,r){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",3)(2,"p",4),n._uU(3," Seleccione el parametro de busqueda de turnos "),n.qZA(),n.TgZ(4,"div",5)(5,"button",6),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.irEspecialidad())}),n._uU(6,"Turnos Por Especialidad"),n.qZA(),n.YNc(7,Tn,3,0,"ng-container",2),n.YNc(8,Cn,3,0,"ng-container",2),n.qZA()(),n.BQk()}if(2&o){const t=n.oxw();n.xp6(7),n.Q6J("ngIf","paciente"===t.rolSesion),n.xp6(1),n.Q6J("ngIf","especialista"===t.rolSesion)}}function Zn(o,r){if(1&o&&(n.ynx(0),n._UZ(1,"app-filtrar",9),n.BQk()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("tipoFiltrado","profesional")("rolUsuario",t.rolSesion)}}function An(o,r){if(1&o&&(n.ynx(0),n._UZ(1,"app-filtrar",9),n.BQk()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("tipoFiltrado","especialidad")("rolUsuario",t.rolSesion)}}function kn(o,r){if(1&o&&(n.ynx(0),n._UZ(1,"app-filtrar",9),n.BQk()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("tipoFiltrado","paciente")("rolUsuario",t.rolSesion)}}const Un=[{path:"",redirectTo:"turnos",pathMatch:"full"},{path:"turnos",component:(()=>{class o{constructor(){this.UsuarioService=(0,n.f3M)(Z.i),this.UserAuthService=(0,n.f3M)(g.H),this.userSubscription=null,this.rolSesion="",this.filtrarProfesional=!1,this.filtrarEspecialidad=!1,this.filtrarPaciente=!1}ngOnInit(){this.userSubscription=this.UserAuthService.estadoLogObservable().subscribe(t=>{t?this.UsuarioService.traerUno(t.email).subscribe(i=>{this.rolSesion=i[0].tipoUsuario}):this.rolSesion=""})}irPaciente(){this.filtrarPaciente=!0}irProfesional(){this.filtrarProfesional=!0}irEspecialidad(){this.filtrarEspecialidad=!0}static#n=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=n.Xpm({type:o,selectors:[["app-mis-turnos-page"]],decls:7,vars:4,consts:[[1,"px-1","py-2","my-2","text-center"],[1,"display-1"],[4,"ngIf"],[1,"col-lg-8","mx-auto"],[1,"lead","mb-4"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["type","button",1,"botonimagen","imagenEspecialidad",3,"click"],["type","button",1,"botonimagen","imagenProfesional",3,"click"],["type","button",1,"botonimagen","imagenPaciente",3,"click"],[3,"tipoFiltrado","rolUsuario"]],template:function(i,e){1&i&&(n.TgZ(0,"div",0)(1,"h1",1),n._uU(2,"Mis Turnos"),n.qZA(),n.YNc(3,vn,9,2,"ng-container",2),n.YNc(4,Zn,2,2,"ng-container",2),n.YNc(5,An,2,2,"ng-container",2),n.YNc(6,kn,2,2,"ng-container",2),n.qZA()),2&i&&(n.xp6(3),n.Q6J("ngIf",!e.filtrarProfesional&&!e.filtrarEspecialidad&&!e.filtrarPaciente),n.xp6(1),n.Q6J("ngIf",e.filtrarProfesional),n.xp6(1),n.Q6J("ngIf",e.filtrarEspecialidad),n.xp6(1),n.Q6J("ngIf",e.filtrarPaciente))},dependencies:[p.O5,xn],styles:[".botonimagen[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;height:350px;width:350px;background-position:center;transition:opacity .2s ease-in-out;font-weight:700;font-size:2rem}.imagenEspecialidad[_ngcontent-%COMP%]{background-image:url(especialidad.73b8973773c7c766.jpg)}.imagenProfesional[_ngcontent-%COMP%]{background-image:url(profesional.35465c3b3cb6e055.jpg)}.imagenPaciente[_ngcontent-%COMP%]{background-image:url(paciente.5c48cd21d6ffe785.jpg)}.botonimagen[_ngcontent-%COMP%]:hover{opacity:.7}"]})}return o})()},{path:"cargarAtencion",component:A}];let yn=(()=>{class o{static#n=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=n.oAB({type:o});static#o=this.\u0275inj=n.cJS({imports:[[s.Bz.forChild(Un)],p.ez,s.Bz]})}return o})(),Mn=(()=>{class o{static#n=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=n.oAB({type:o});static#o=this.\u0275inj=n.cJS({imports:[p.ez,yn,a.u5,a.UX]})}return o})()},3530:(S,v,u)=>{u.d(v,{D:()=>n});var p=u(4946),s=u(5723);let n=(()=>{class g{constructor(){this.firestore=(0,p.f3M)(s.gg),this.instanciaFirestore=(0,s.hJ)(this.firestore,"turnos")}todos(){return(0,s.BS)(this.instanciaFirestore)}guardar(l){const _=(0,s.JU)(this.instanciaFirestore);return l.idTurno=_.id,(0,s.pl)(_,{...l})}traerUno(l){const a=(0,s.IO)(this.instanciaFirestore,(0,s.ar)("idTurno","==",l));return(0,s.BS)(a)}traerPorPaciente(l){const a=(0,s.IO)(this.instanciaFirestore,(0,s.ar)("pacienteEmail","==",l));return(0,s.BS)(a)}traerPorEspecialista(l){const a=(0,s.IO)(this.instanciaFirestore,(0,s.ar)("especialistaEmail","==",l));return(0,s.BS)(a)}traerPorPacienteYEspecialidad(l,a){const _=(0,s.IO)(this.instanciaFirestore,(0,s.ar)("pacienteEmail","==",l),(0,s.ar)("especialidad","==",a));return(0,s.BS)(_)}traerPorEspecialistaYEspecialidad(l,a){const _=(0,s.IO)(this.instanciaFirestore,(0,s.ar)("especialistaEmail","==",l),(0,s.ar)("especialidad","==",a));return(0,s.BS)(_)}traerPorPacienteYProfesional(l,a){const _=(0,s.IO)(this.instanciaFirestore,(0,s.ar)("especialistaEmail","==",l),(0,s.ar)("pacienteEmail","==",a));return(0,s.BS)(_)}modificarEstadoTurno(l,a,_){return new Promise((b,m)=>{this.traerUnoSubscription=this.traerUno(l).subscribe(f=>{if(console.log(f[0]),f[0]){const x=l,T=(0,s.hJ)(this.firestore,"turnos"),h=(0,s.JU)(T,x);(0,s.r7)(h,{estado:a,comentario:_}).then(()=>{console.log("modificado"),b()}).catch(C=>{console.error("Error:",C),m(C)}).finally(()=>{this.traerUnoSubscription&&(this.traerUnoSubscription.unsubscribe(),this.traerUnoSubscription=void 0)})}})})}modificarCalificarAtencion(l,a,_){return new Promise((b,m)=>{this.traerUnoSubscription=this.traerUno(l).subscribe(f=>{if(console.log(f[0]),f[0]){const x=l,T=(0,s.hJ)(this.firestore,"turnos"),h=(0,s.JU)(T,x);(0,s.r7)(h,{estado:a,atencion:_}).then(()=>{console.log("modificado"),b()}).catch(C=>{console.error("Error:",C),m(C)}).finally(()=>{this.traerUnoSubscription&&(this.traerUnoSubscription.unsubscribe(),this.traerUnoSubscription=void 0)})}})})}modificarCalificarEncuesta(l,a){return new Promise((_,b)=>{this.traerUnoSubscription=this.traerUno(l).subscribe(m=>{if(console.log(m[0]),m[0]){const f=l,x=(0,s.hJ)(this.firestore,"turnos"),T=(0,s.JU)(x,f);(0,s.r7)(T,{encuesta:a}).then(()=>{console.log("modificado"),_()}).catch(h=>{console.error("Error:",h),b(h)}).finally(()=>{this.traerUnoSubscription&&(this.traerUnoSubscription.unsubscribe(),this.traerUnoSubscription=void 0)})}})})}static#n=this.\u0275fac=function(a){return new(a||g)};static#t=this.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);